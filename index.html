<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ê°„ë‹¨í•œ ë±€ ê²Œì„</title>
    <script>
        // CSSë„ ë™ì¼í•˜ê²Œ ë²„ì „ ê´€ë¦¬
        const DEV_MODE = true;
        const VERSION = '1.0.0';
        
        const link = document.createElement('link');
        link.rel = 'stylesheet';
        if (DEV_MODE) {
            link.href = `style.css?t=${Date.now()}`;
        } else {
            link.href = `style.css?v=${VERSION}`;
        }
        document.head.appendChild(link);
    </script>
</head>
<body>
    <div class="version-badge" id="version-badge">v1.0.0</div>
    <div class="container">
        <header>
            <h1>ğŸ ë±€ ê²Œì„</h1>
            <div class="score-board">
                <div class="score">ì ìˆ˜: <span id="score">0</span></div>
                <div class="high-score">ìµœê³  ì ìˆ˜: <span id="high-score">0</span></div>
            </div>
        </header>
        
        <div class="game-area">
            <canvas id="gameCanvas" width="400" height="400"></canvas>
            <div id="gameOver" class="game-over hidden">
                <h2>ê²Œì„ ì˜¤ë²„!</h2>
                <p>ìµœì¢… ì ìˆ˜: <span id="final-score">0</span></p>
                <button id="restart-btn">ë‹¤ì‹œ ì‹œì‘</button>
            </div>
        </div>
        
        <div class="controls">
            <p>ë°©í–¥í‚¤(â†‘â†“â†â†’) ë˜ëŠ” WASD í‚¤ë¡œ ì¡°ì‘í•˜ì„¸ìš”</p>
            <p class="touch-hint">ğŸ“± ëª¨ë°”ì¼/ğŸ–±ï¸ PC: ê²Œì„ í™”ë©´ì„ í„°ì¹˜í•˜ê±°ë‚˜ í´ë¦­í•˜ì—¬ ë°©í–¥ì„ ë°”ê¿€ ìˆ˜ ìˆìŠµë‹ˆë‹¤</p>
            <div class="mobile-controls">
                <button class="control-btn" id="up-btn">â†‘</button>
                <div class="horizontal-controls">
                    <button class="control-btn" id="left-btn">â†</button>
                    <button class="control-btn" id="down-btn">â†“</button>
                    <button class="control-btn" id="right-btn">â†’</button>
                </div>
            </div>
        </div>
    </div>
    
    <!-- ê°œë°œ ëª¨ë“œ: íƒ€ì„ìŠ¤íƒ¬í”„ ì‚¬ìš© (ìë™ ìºì‹œ ë¬´íš¨í™”) -->
    <!-- ë°°í¬ ëª¨ë“œ: ë²„ì „ ë²ˆí˜¸ ì‚¬ìš© (ì˜ˆ: game.js?v=1.0.0) -->
    <script>
        // ê°œë°œ ì¤‘ì—ëŠ” íƒ€ì„ìŠ¤íƒ¬í”„ ì‚¬ìš©, ë°°í¬ ì‹œì—ëŠ” ë²„ì „ ë²ˆí˜¸ ì‚¬ìš©
        const DEV_MODE = true; // ë°°í¬ ì‹œ falseë¡œ ë³€ê²½
        let VERSION = '1.0.0'; // ì´ˆê¸° ë²„ì „
        
        // ë²„ì „ ê´€ë¦¬ í•¨ìˆ˜
        function getVersion() {
            const versionKey = 'snakeGameVersion';
            const lastPageLoadKey = 'snakeGameLastPageLoad';
            
            if (DEV_MODE) {
                // ê°œë°œ ëª¨ë“œ: localStorageì—ì„œ ë²„ì „ ê°€ì ¸ì˜¤ê¸° ë˜ëŠ” ì´ˆê¸°í™”
                let version = localStorage.getItem(versionKey);
                const lastPageLoad = localStorage.getItem(lastPageLoadKey);
                const now = Date.now();
                
                if (!version) {
                    // ì²˜ìŒ ë¡œë“œ: ì´ˆê¸° ë²„ì „ ì„¤ì •
                    version = VERSION;
                    localStorage.setItem(versionKey, version);
                } else {
                    // ì´ì „ í˜ì´ì§€ ë¡œë“œê°€ ìˆì—ˆê³ , 5ì´ˆ ì´ìƒ ì§€ë‚¬ìœ¼ë©´ ë²„ì „ ì¦ê°€
                    // (ê°™ì€ ì„¸ì…˜ì—ì„œ ì—°ì† ìƒˆë¡œê³ ì¹¨ ë°©ì§€)
                    if (lastPageLoad && (now - parseInt(lastPageLoad)) > 5000) {
                        version = incrementVersion(version);
                        localStorage.setItem(versionKey, version);
                    }
                }
                
                localStorage.setItem(lastPageLoadKey, now.toString());
                return version;
            } else {
                // ë°°í¬ ëª¨ë“œ: ê³ ì • ë²„ì „ ì‚¬ìš©
                return VERSION;
            }
        }
        
        // ë²„ì „ ì¦ê°€ í•¨ìˆ˜ (ì˜ˆ: 1.0.0 -> 1.0.1 -> 1.0.2 ...)
        function incrementVersion(version) {
            const parts = version.split('.');
            let major = parseInt(parts[0]) || 1;
            let minor = parseInt(parts[1]) || 0;
            let patch = parseInt(parts[2]) || 0;
            
            // íŒ¨ì¹˜ ë²„ì „ ì¦ê°€
            patch++;
            
            // íŒ¨ì¹˜ê°€ 100ì„ ë„˜ìœ¼ë©´ ë§ˆì´ë„ˆ ì¦ê°€
            if (patch >= 100) {
                patch = 0;
                minor++;
            }
            
            // ë§ˆì´ë„ˆê°€ 100ì„ ë„˜ìœ¼ë©´ ë©”ì´ì € ì¦ê°€
            if (minor >= 100) {
                minor = 0;
                major++;
            }
            
            return `${major}.${minor}.${patch}`;
        }
        
        // ë²„ì „ ê°€ì ¸ì˜¤ê¸° ë° í‘œì‹œ
        VERSION = getVersion();
        document.getElementById('version-badge').textContent = `v${VERSION}`;
        
        const script = document.createElement('script');
        if (DEV_MODE) {
            // ê°œë°œ ëª¨ë“œ: íƒ€ì„ìŠ¤íƒ¬í”„ë¡œ ìºì‹œ ë¬´íš¨í™”
            script.src = `game.js?t=${Date.now()}`;
        } else {
            // ë°°í¬ ëª¨ë“œ: ë²„ì „ ë²ˆí˜¸ ì‚¬ìš©
            script.src = `game.js?v=${VERSION}`;
        }
        document.body.appendChild(script);
    </script>
</body>
</html>

